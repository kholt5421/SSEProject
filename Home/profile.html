<!DOCTYPE = html>
<html lang="en">
    <head>
        <script src="../index.html"></script>
        <script src="../DatabaseFiles/MongoConnections.js"></script>
        <script>
            function makeProfile(){
                //Get user data from mongo
                var data = {
                    user_id : {$eq: userId}
                };
                retrieve(data).then((result) =>{
                    //Place user data on screen
                    document.getElementById("username").innerHTML = "Username: "+result[0].username;
                    document.getElementById("email").innerHTML = "Email: "+result[0].email;
                    for(let i = 0; i < result[0].scores.length; i++){
                        //Create the div to store the current score
                        var div = document.createElement("div");
                        div.className = "score";
                        //Place it on the screen
                        var scoreScreen = document.getElementById("scoreScreen");
                        scoreScreen.appendChild(div);
                        //Write the score on the score screen
                        div.innerHTML = result[0].scores[i];
                    }
                });
            }
            function edit(){
                window.location.href = "edit.html";
            }
            function returnHome(loggingOut){
                if(loggingOut){
                    sessionStorage.setItem("loggedIn",JSON.stringify(false));
                    sessionStorage.setItem("userId",JSON.stringify(null));
                    sessionStorage.setItem("userData",JSON.stringify([null,null,null]));
                }
                window.location.href = "home.html";
            }
        </script>
        <link rel="stylesheet" href="../styles.css">
    </head>
    <body>
        <div class="menu">
            <h1>Your Profile</h1>
            <div class="form">
                <p id="username"></p>
                <p id="email"></p>
                <p>Your Scores</p>
                <div id="scoreScreen"></div>
                <button class="function" onclick="edit()">Edit</button><br>
                <button class="function" onclick="returnHome(true)">Logout</button>
                <button class="function" onclick="returnHome(false)">Return Home</button>
            </div>
        </div>
        <script>makeProfile()</script>
    </body>
</html>